/*!
 * mi18n - https://github.com/Draggable/mi18n
 * Version: 0.3.4-beta.1
 * Author: Kevin Chappell <kevin.b.chappell@gmail.com> (http://kevin-chappell.com)
 */
module.exports=function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,n){for(var e,r=0;r<n.length;r++)e=n[r],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=function(){function t(){var n=this;e(this,t);var r={extension:".lang",location:"assets/lang/",langs:["en-US"],locale:"en-US",preloaded:{}};this.init=function(t){return n.config=Object.assign({},r,t),n.langs=Object.assign({},n.config.preloaded),n.locale=n.config.locale||n.config.langs[0],n.setCurrent(n.locale)}}return t.prototype.getValue=function(t){return this.current&&this.current[t]||t},t.prototype.makeSafe=function(t){var n={"{":"\\{","}":"\\}","|":"\\|"};return t=t.replace(/\{|\}|\|/g,function(t){return n[t]}),new RegExp(t,"g")},t.prototype.put=function(t,n){return this.current[t]=n},t.prototype.get=function(t,n){var e=this,o=this.getValue(t),i=o.match(/\{[^\}]+?\}/g),u=void 0;if(n&&i)if("object"===(void 0===n?"undefined":r(n)))for(var s=0;s<i.length;s++)u=i[s].substring(1,i[s].length-1),o=o.replace(e.makeSafe(i[s]),n[u]||"");else o=o.replace(/\{[^\}]+?\}/g,n);return o},t.prototype.fromFile=function(t){for(var n,e=t.split("\n"),r={},o=0;o<e.length;o++)(n=e[o].match(/^(.+?) *?= *?([^\n]+)/))&&(r[n[1]]=n[2].replace(/^\s+|\s+$/,""));return r},t.prototype.processFile=function(t){return this.fromFile(t.replace(/\n\n/g,"\n"))},t.prototype.loadLang=function(t){var n=this;return new Promise(function(e,r){if(n.langs[t])e(n.langs[t]);else{var o=new XMLHttpRequest,i=[n.config.location,t,n.config.extension].join("");o.open("GET",i,!0),o.onload=function(){if(304>=this.status){var i=n.processFile(o.responseText);n.langs[t]=i,e(i)}else r({status:this.status,statusText:o.statusText})},o.onerror=function(){r({status:this.status,statusText:o.statusText})},o.send()}})},t.prototype.setCurrent=function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"en-US";return this.loadLang(n).then(function(e){return t.locale=n,t.current=t.langs[n],e})},o(t,[{key:"getLangs",get:function(){return this.config.langs}}]),t}();n.default=new i}]);